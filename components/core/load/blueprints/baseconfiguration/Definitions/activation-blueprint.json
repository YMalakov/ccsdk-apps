{
  "metadata": {
    "template_author": "Brinda Santh Muthuramalingam",
    "author-email": "brindasanth@gmail.com",
    "user-groups": "ADMIN, OPERATION",
    "template_name": "baseconfiguration",
    "template_version": "1.0.0",
    "template_tags": "brinda, tosca"
  },
  "topology_template": {
    "inputs": {
      "request-id": {
        "required": true,
        "type": "string"
      },
      "action-name": {
        "required": true,
        "type": "string"
      },
      "scope-type": {
        "required": true,
        "type": "string"
      },
      "hostname": {
        "required": true,
        "type": "string"
      },
      "template_name": {
        "required": true,
        "type": "string"
      },
      "template_version": {
        "required": true,
        "type": "string"
      }
    },
    "node_templates": {
      "resource-assignment-ra-component": {
        "capabilities": {
          "component-node": {}
        },
        "interfaces": {
          "org-onap-sdnc-config-assignment-service-ConfigAssignmentNode": {
            "operations": {
              "process": {
                "inputs": {
                  "template-names": [
                    "base-config-template",
                    "licence-template"
                  ],
                  "action-name": {
                    "get_input": "action-name"
                  },
                  "template-name": {
                    "get_input": "template_name"
                  },
                  "template-version": {
                    "get_input": "template_version"
                  },
                  "resource-type": "vnf-type",
                  "request-id": {
                    "get_input": "request-id"
                  },
                  "resource-id": {
                    "get_input": "hostname"
                  }
                },
                "outputs": {
                  "resource-assignment-params": "success",
                  "status": "status"
                }
              }
            }
          }
        },
        "type": "component-resource-assignment"
      },
      "resource-assignment-action": {
        "properties": {
          "mode": "sync",
          "version": {
            "get_input": "template_version"
          },
          "is-start-flow": false
        },
        "requirements": {
          "component-dependency": {
            "capability": "component-node",
            "node": "resource-assignment-ra-component",
            "relationship": "tosca.relationships.DependsOn"
          }
        },
        "capabilities": {
          "dg-node": {}
        },
        "interfaces": {
          "CONFIG": {
            "operations": {
              "ResourceAssignment": {
                "inputs": {
                  "params": []
                }
              }
            }
          }
        },
        "type": "dg-resource-assignment"
      }
    },
    "workflows": {
      "activate-process": {
        "steps": {
          "call-resource-assignment": {
            "description": "Invoke Resource Assignment Component",
            "target": "resource-assignment",
            "activities": [
              {
                "call_operation": "ResourceAssignmentNode.process"
              }
            ],
            "on_success": [
              "download-baseconfig"
            ]
          },
          "download-baseconfig": {
            "description": "Call Download Base Config Component",
            "target": "activate-netconf",
            "activities": [
              {
                "call_operation": "NetconfTransactionNode.process"
              }
            ],
            "on_success": [
              "download-licence"
            ]
          },
          "download-licence": {
            "description": "Call Download Licence Component",
            "target": "activate-netconf",
            "activities": [
              {
                "call_operation": "NetconfTransactionNode.process"
              }
            ]
          }
        }
      }
    }
  },
  "artifact_types": {
    "artifact-template-velocity": {
      "description": " Velocity Template used for Configuration",
      "version": "1.0.0",
      "file_ext": [
        "vtl"
      ],
      "derived_from": "tosca.artifacts.Implementation"
    },
    "artifact-mapping-resource": {
      "description": " Velocity Template Resource Mapping File used along with Configuration template",
      "version": "1.0.0",
      "file_ext": [
        "json"
      ],
      "derived_from": "tosca.artifacts.Implementation"
    },
    "artifact-script-kotlin": {
      "description": " Kotlin Script Template used for Configuration",
      "version": "1.0.0",
      "file_ext": [
        "kt"
      ],
      "derived_from": "tosca.artifacts.Implementation"
    },
    "artifact-script-python": {
      "description": " Kotlin Script Template used for Configuration",
      "version": "1.0.0",
      "file_ext": [
        "py"
      ],
      "derived_from": "tosca.artifacts.Implementation"
    },
    "artifact-bpmn-camunda": {
      "description": " Camunda BPM File",
      "version": "1.0.0",
      "file_ext": [
        "bpmn"
      ],
      "derived_from": "tosca.artifacts.Implementation"
    },
    "artifact-component-jar": {
      "description": "Component Jar",
      "version": "1.0.0",
      "file_ext": [
        "jar"
      ],
      "derived_from": "tosca.artifacts.Implementation"
    }
  },
  "node_types": {
    "dg-resource-assignment": {
      "description": "This is Resource Assignment Directed Graph",
      "version": "1.0.0",
      "properties": {
        "mode": {
          "required": false,
          "type": "string",
          "default": "sync"
        },
        "version": {
          "required": false,
          "type": "string",
          "default": "LATEST"
        },
        "is-start-flow": {
          "required": false,
          "type": "boolean",
          "default": false
        }
      },
      "capabilities": {
        "dg-node": {
          "type": "tosca.capabilities.Node"
        }
      },
      "requirements": {
        "component-dependency": {
          "capability": "component-node",
          "node": "component-resource-assignment",
          "relationship": "tosca.relationships.DependsOn"
        }
      },
      "interfaces": {
        "CONFIG": {
          "operations": {
            "ResourceAssignment": {
              "inputs": {
                "params": {
                  "required": false,
                  "type": "list",
                  "entry_schema": {
                    "type": "datatype-property"
                  }
                }
              }
            }
          }
        }
      },
      "derived_from": "tosca.nodes.DG"
    },
    "component-resource-assignment": {
      "description": "This is Resource Assignment Component API",
      "version": "1.0.0",
      "capabilities": {
        "component-node": {
          "type": "tosca.capabilities.Node"
        }
      },
      "interfaces": {
        "org-onap-sdnc-config-assignment-service-ConfigAssignmentNode": {
          "operations": {
            "process": {
              "inputs": {
                "action-name": {
                  "description": "Action Name of the process",
                  "required": true,
                  "type": "string"
                },
                "template-name": {
                  "description": "Service Template Name.",
                  "required": true,
                  "type": "string"
                },
                "template-version": {
                  "description": "Service Template Version.",
                  "required": true,
                  "type": "string"
                },
                "resource-type": {
                  "description": "Request type.",
                  "required": true,
                  "type": "string"
                },
                "template-names": {
                  "description": "Name of the artifact Node Templates, to get the template Content.",
                  "required": true,
                  "type": "list",
                  "entry_schema": {
                    "type": "string"
                  }
                },
                "request-id": {
                  "description": "Request Id, Unique Id for the request.",
                  "required": true,
                  "type": "string"
                },
                "resource-id": {
                  "description": "Resource Id.",
                  "required": true,
                  "type": "string"
                }
              },
              "outputs": {
                "resource-assignment-params": {
                  "required": true,
                  "type": "string"
                },
                "status": {
                  "required": true,
                  "type": "string"
                }
              }
            }
          }
        }
      },
      "derived_from": "tosca.nodes.Component"
    },
    "tosca.nodes.DG": {
      "description": "This is Resource Assignment Component API",
      "version": "1.0.0",
      "derived_from": "tosca.nodes.Root"
    },
    "tosca.nodes.Component": {
      "description": "This is Resource Assignment Component API",
      "version": "1.0.0",
      "derived_from": "tosca.nodes.Root"
    },
    "tosca.nodes.component.Python": {
      "description": "This is Resource Assignment Python Component API",
      "version": "1.0.0",
      "derived_from": "tosca.nodes.Root"
    }
  },
  "data_types": {
    "datatype-resource-assignment": {
      "version": "1.0.0",
      "description": "This is Resource Assignment Data Type",
      "properties": {
        "property": {
          "required": true,
          "type": "datatype-property"
        },
        "input-param": {
          "required": true,
          "type": "boolean"
        },
        "dictionary-name": {
          "required": false,
          "type": "string"
        },
        "dictionary-source": {
          "required": false,
          "type": "string"
        },
        "dependencies": {
          "required": true,
          "type": "list",
          "entry_schema": {
            "type": "string"
          }
        },
        "status": {
          "required": false,
          "type": "string"
        },
        "message": {
          "required": false,
          "type": "string"
        },
        "updated-date": {
          "required": false,
          "type": "string"
        },
        "updated-by": {
          "required": false,
          "type": "string"
        }
      },
      "derived_from": "tosca.datatypes.Root"
    },
    "datatype-property": {
      "version": "1.0.0",
      "description": "This is Entry point Input Data Type, which is dynamic datatype, The parameter names will be populated during the Design time for each inputs",
      "properties": {
        "type": {
          "required": true,
          "type": "string"
        },
        "description": {
          "required": false,
          "type": "string"
        },
        "required": {
          "required": false,
          "type": "boolean"
        },
        "default": {
          "required": false,
          "type": "string"
        },
        "entry_schema": {
          "required": false,
          "type": "string"
        }
      },
      "derived_from": "tosca.datatypes.Root"
    }
  }
}